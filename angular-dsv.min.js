(function(){"use strict";function d3_dsv_shim(delimiter){var delimiterCode=delimiter.charCodeAt(0);var dsv={};dsv.parseRows=function(text,f){var EOL={},EOF={},rows=[],N=text.length,I=0,n=0,t,eol;function token(){if(I>=N)return EOF;if(eol)return eol=false,EOL;var j=I;if(text.charCodeAt(j)===34){var i=j;while(i++<N){if(text.charCodeAt(i)===34){if(text.charCodeAt(i+1)!==34)break;++i}}I=i+2;var c=text.charCodeAt(i+1);if(c===13){eol=true;if(text.charCodeAt(i+2)===10)++I}else if(c===10){eol=true}return text.substring(j+1,i).replace(/""/g,'"')}while(I<N){var c=text.charCodeAt(I++),k=1;if(c===10)eol=true;else if(c===13){eol=true;if(text.charCodeAt(I)===10)++I,++k}else if(c!==delimiterCode)continue;return text.substring(j,I-k)}return text.substring(j)}while((t=token())!==EOF){var a=[];while(t!==EOL&&t!==EOF){a.push(t);t=token()}if(f&&!(a=f(a,n++)))continue;rows.push(a)}return rows};dsv.parse=function(data,f){var o;return dsv.parseRows(data,function(row,i){if(o)return o(row,i-1);var a=new Function("d","return {"+row.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a})};return dsv}function parseParams(requestConfig,f){return angular.isFunction(requestConfig)?{requestConfig:null,f:requestConfig}:{requestConfig:requestConfig,f:f}}function dsvFactory($http,$window){function factory(delimiter){var d3_dsv=$window.d3?$window.d3.dsv(delimiter):d3_dsv_shim(delimiter);function dsv(requestConfig,f){var config={method:"get",transformResponse:function(data){return d3_dsv.parse(data,f)}};angular.extend(config,requestConfig);return $http(config)}dsv.parseRows=d3_dsv.parseRows;dsv.parse=d3_dsv.parse;dsv.get=function(url,requestConfig,f){var params=parseParams(requestConfig,f);var config={method:"get",url:url};return dsv(angular.extend(config,params.requestConfig),params.f)};dsv.getRows=function(url,requestConfig,f){var params=parseParams(requestConfig,f);var config={method:"get",url:url,transformResponse:function(data){return d3_dsv.parseRows(data,params.f)}};return dsv(angular.extend(config,params.requestConfig),params.f)};return dsv}factory.tsv=factory("	");factory.csv=factory(",");return factory}dsvFactory.$inject=["$http","$window"];angular.module("hc.dsv",[]).factory("dsv",dsvFactory)})();