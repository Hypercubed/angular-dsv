/*
 * angular-dsv 0.0.5
 * (c) 2015 J. Harshbarger
 * Licensed MIT
 */
!function(){"use strict";var a=angular.module("hc.dsv",[]);a.factory("dsv",["$http","$window",function(a,b){function c(c){function d(b,c){var e={method:"get",transformResponse:function(a){return d.parse(a,c)}};return angular.extend(e,b),a(e)}function e(a,b){return angular.isFunction(a)?{requestConfig:null,f:a}:{requestConfig:a,f:b}}var f=c.charCodeAt(0);if(b.d3){var g=b.d3.dsv(c);d.parseRows=g.parseRows,d.parse=g.parse}else d.parseRows=function(a,b){function c(){if(k>=j)return h;if(e)return e=!1,g;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.substring(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),i=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++i);else if(d!==f)continue;return a.substring(b,k-i)}return a.substring(b)}for(var d,e,g={},h={},i=[],j=a.length,k=0,l=0;(d=c())!==h;){for(var m=[];d!==g&&d!==h;)m.push(d),d=c();(!b||(m=b(m,l++)))&&i.push(m)}return i},d.parse=function(a,b){var c;return d.parseRows(a,function(a,d){if(c)return c(a,d-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");c=b?function(a,c){return b(e(a),c)}:e})};return d.get=function(a,b,c){var f=e(b,c),g={method:"get",url:a};return d(angular.extend(g,f.requestConfig),f.f)},d.getRows=function(a,b,c){var f=e(b,c),g={method:"get",url:a,transformResponse:function(a){return d.parseRows(a,f.f)}};return d(angular.extend(g,f.requestConfig),f.f)},d}return c.tsv=c("	"),c.csv=c(","),c}])}();