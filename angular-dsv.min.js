/*
 * angular-dsv 0.0.1
 * (c) 2014 J. Harshbarger
 * Licensed MIT
 */
!function(){"use strict";var a=angular.module("hc.dsv",[]);a.factory("dsv",function(a){function b(b){function c(b,d){var e={method:"get",transformResponse:function(a){return c.parse(a,d)}};return angular.extend(e,b),a(e)}var d=b.charCodeAt(0);return c.parseRows=function(a,b){function c(){if(k>=j)return h;if(f)return f=!1,g;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var e=a.charCodeAt(c+1);return 13===e?(f=!0,10===a.charCodeAt(c+2)&&++k):10===e&&(f=!0),a.substring(b+1,c).replace(/""/g,'"')}for(;j>k;){var e=a.charCodeAt(k++),i=1;if(10===e)f=!0;else if(13===e)f=!0,10===a.charCodeAt(k)&&(++k,++i);else if(e!==d)continue;return a.substring(b,k-i)}return a.substring(b)}for(var e,f,g={},h={},i=[],j=a.length,k=0,l=0;(e=c())!==h;){for(var m=[];e!==g&&e!==h;)m.push(e),e=c();(!b||(m=b(m,l++)))&&i.push(m)}return i},c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.get=function(a,b,d){return c(angular.extend(b||{},{method:"get",url:a}),d)},c.getRows=function(b,d,e){var f={method:"get",url:b,transformResponse:function(a){return c.parseRows(a,e)}};return angular.extend(f,d),a(f)},c}return b.tsv=b("	"),b.csv=b(","),b})}();